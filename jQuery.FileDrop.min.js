(function(e){"use strict";function r(t,n,r,i){return function(s){n.push({name:t.name,size:t.size,type:t.type,lastModified:t.lastModifiedDate,data:s.target.result});n.length===r&&e.isFunction(i.onFileRead)&&i.onFileRead(n,i)}}function i(e){e.stopPropagation();e.preventDefault()}var t=null;e.fn.fileDragAndDrop=function(t){if(e.isFunction(t)){var r={};r.onFileRead=t;t=r}return this.each(function(){var r=e(this),i=e.extend({},e.fn.fileDragAndDrop.defaults,t);i.addClassTo.length===0&&(i.addClassTo=r);this.addEventListener("dragenter",function(e){n._over(e,r,i)},!1);this.addEventListener("dragover",function(e){n._exit(e,r,i)},!1);this.addEventListener("drop",function(e){n._drop(e,r,i)},!1)})};e.fn.fileDragAndDrop.defaults={overClass:"over",addClassTo:e([]),onFileRead:null};var n={_over:function(t,n,r){e(r.addClassTo).addClass(r.overClass);i(t)},_exit:function(n,r,s){clearTimeout(t);t=setTimeout(function(){e(s.addClassTo).removeClass(s.overClass)},100);i(n)},_drop:function(t,n,s){e(s.addClassTo).removeClass(s.overClass);i(t);var o=t.dataTransfer.files,u=[];for(var a=0;a<=o.length-1;a++){var f=new FileReader,l=r(o[a],u,o.length,s);f.addEventListener?f.addEventListener("loadend",l,!1):f.onloadend=l;f.readAsDataURL(o[a])}}}})(jQuery);